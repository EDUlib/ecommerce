TRAVIS
M	.travis.yml
	de master à juniper.rc1

SDK PAYSAFE / NETBANX
	tout le SDK en Python 3 (et Python 2 si nécessaire)
	intégré à ecommerce pour nous faciliter la vie
A	ecommerce/Paysafe/Installation_Guide.txt
A	ecommerce/Paysafe/LICENSE
A	ecommerce/Paysafe/README.edulib
A	ecommerce/Paysafe/README.md
A	ecommerce/Paysafe/src/HTMLTestRunner.py
A	ecommerce/Paysafe/src/PythonNetBanxSDK/CardPayments/AccordD.py
A	ecommerce/Paysafe/src/PythonNetBanxSDK/CardPayments/AccordD.py.python2
A	ecommerce/Paysafe/src/PythonNetBanxSDK/CardPayments/AcquirerResponse.py
A	ecommerce/Paysafe/src/PythonNetBanxSDK/CardPayments/AcquirerResponse.py.python2
A	ecommerce/Paysafe/src/PythonNetBanxSDK/CardPayments/Authentication.py
A	ecommerce/Paysafe/src/PythonNetBanxSDK/CardPayments/Authentication.py.python2
A	ecommerce/Paysafe/src/PythonNetBanxSDK/CardPayments/Authorization.py
A	ecommerce/Paysafe/src/PythonNetBanxSDK/CardPayments/Authorization.py.python2
A	ecommerce/Paysafe/src/PythonNetBanxSDK/CardPayments/AuthorizationReversal.py
A	ecommerce/Paysafe/src/PythonNetBanxSDK/CardPayments/AuthorizationReversal.py.python2
A	ecommerce/Paysafe/src/PythonNetBanxSDK/CardPayments/BillingDetails.py
A	ecommerce/Paysafe/src/PythonNetBanxSDK/CardPayments/BillingDetails.py.python2
A	ecommerce/Paysafe/src/PythonNetBanxSDK/CardPayments/Card.py
A	ecommerce/Paysafe/src/PythonNetBanxSDK/CardPayments/Card.py.python2
A	ecommerce/Paysafe/src/PythonNetBanxSDK/CardPayments/CardExpiry.py
A	ecommerce/Paysafe/src/PythonNetBanxSDK/CardPayments/CardExpiry.py.python2
A	ecommerce/Paysafe/src/PythonNetBanxSDK/CardPayments/CardPaymentsService.py
A	ecommerce/Paysafe/src/PythonNetBanxSDK/CardPayments/CardPaymentsService.py.python2
A	ecommerce/Paysafe/src/PythonNetBanxSDK/CardPayments/MasterPass.py
A	ecommerce/Paysafe/src/PythonNetBanxSDK/CardPayments/MasterPass.py.python2
A	ecommerce/Paysafe/src/PythonNetBanxSDK/CardPayments/MerchantDescriptor.py
A	ecommerce/Paysafe/src/PythonNetBanxSDK/CardPayments/MerchantDescriptor.py.python2
A	ecommerce/Paysafe/src/PythonNetBanxSDK/CardPayments/Pagination.py
A	ecommerce/Paysafe/src/PythonNetBanxSDK/CardPayments/Pagination.py.python2
A	ecommerce/Paysafe/src/PythonNetBanxSDK/CardPayments/RecipientDateOfBirth.py
A	ecommerce/Paysafe/src/PythonNetBanxSDK/CardPayments/RecipientDateOfBirth.py.python2
A	ecommerce/Paysafe/src/PythonNetBanxSDK/CardPayments/Refund.py
A	ecommerce/Paysafe/src/PythonNetBanxSDK/CardPayments/Refund.py.python2
A	ecommerce/Paysafe/src/PythonNetBanxSDK/CardPayments/Settlement.py
A	ecommerce/Paysafe/src/PythonNetBanxSDK/CardPayments/Settlement.py.python2
A	ecommerce/Paysafe/src/PythonNetBanxSDK/CardPayments/ShippingDetails.py
A	ecommerce/Paysafe/src/PythonNetBanxSDK/CardPayments/ShippingDetails.py.python2
A	ecommerce/Paysafe/src/PythonNetBanxSDK/CardPayments/Verification.py
A	ecommerce/Paysafe/src/PythonNetBanxSDK/CardPayments/Verification.py.python2
A	ecommerce/Paysafe/src/PythonNetBanxSDK/CardPayments/VisaAdditionalAuthData.py
A	ecommerce/Paysafe/src/PythonNetBanxSDK/CardPayments/VisaAdditionalAuthData.py.python2
A	ecommerce/Paysafe/src/PythonNetBanxSDK/CardPayments/__init__.py
A	ecommerce/Paysafe/src/PythonNetBanxSDK/CustomerVault/Addresses.py
A	ecommerce/Paysafe/src/PythonNetBanxSDK/CustomerVault/Addresses.py.python2
A	ecommerce/Paysafe/src/PythonNetBanxSDK/CustomerVault/Card.py
A	ecommerce/Paysafe/src/PythonNetBanxSDK/CustomerVault/Card.py.python2
A	ecommerce/Paysafe/src/PythonNetBanxSDK/CustomerVault/CustomerVaultService.py
A	ecommerce/Paysafe/src/PythonNetBanxSDK/CustomerVault/CustomerVaultService.py.python2
A	ecommerce/Paysafe/src/PythonNetBanxSDK/CustomerVault/DateOfBirth.py
A	ecommerce/Paysafe/src/PythonNetBanxSDK/CustomerVault/DateOfBirth.py.python2
A	ecommerce/Paysafe/src/PythonNetBanxSDK/CustomerVault/Profile.py
A	ecommerce/Paysafe/src/PythonNetBanxSDK/CustomerVault/Profile.py.python2
A	ecommerce/Paysafe/src/PythonNetBanxSDK/CustomerVault/__init__.py
A	ecommerce/Paysafe/src/PythonNetBanxSDK/HostedPayment/AddendumData.py
A	ecommerce/Paysafe/src/PythonNetBanxSDK/HostedPayment/AddendumData.py.python2
A	ecommerce/Paysafe/src/PythonNetBanxSDK/HostedPayment/AncillaryFee.py
A	ecommerce/Paysafe/src/PythonNetBanxSDK/HostedPayment/AncillaryFee.py.python2
A	ecommerce/Paysafe/src/PythonNetBanxSDK/HostedPayment/AssociatedTransactions.py
A	ecommerce/Paysafe/src/PythonNetBanxSDK/HostedPayment/AssociatedTransactions.py.python2
A	ecommerce/Paysafe/src/PythonNetBanxSDK/HostedPayment/BillingDetails.py
A	ecommerce/Paysafe/src/PythonNetBanxSDK/HostedPayment/BillingDetails.py.python2
A	ecommerce/Paysafe/src/PythonNetBanxSDK/HostedPayment/Callback.py
A	ecommerce/Paysafe/src/PythonNetBanxSDK/HostedPayment/Callback.py.python2
A	ecommerce/Paysafe/src/PythonNetBanxSDK/HostedPayment/Card.py
A	ecommerce/Paysafe/src/PythonNetBanxSDK/HostedPayment/Card.py.python2
A	ecommerce/Paysafe/src/PythonNetBanxSDK/HostedPayment/ExtendedOptions.py
A	ecommerce/Paysafe/src/PythonNetBanxSDK/HostedPayment/ExtendedOptions.py.python2
A	ecommerce/Paysafe/src/PythonNetBanxSDK/HostedPayment/HostedPaymentService.py
A	ecommerce/Paysafe/src/PythonNetBanxSDK/HostedPayment/HostedPaymentService.py.python2
A	ecommerce/Paysafe/src/PythonNetBanxSDK/HostedPayment/Navigation.py
A	ecommerce/Paysafe/src/PythonNetBanxSDK/HostedPayment/Navigation.py.python2
A	ecommerce/Paysafe/src/PythonNetBanxSDK/HostedPayment/Order.py
A	ecommerce/Paysafe/src/PythonNetBanxSDK/HostedPayment/Order.py.python2
A	ecommerce/Paysafe/src/PythonNetBanxSDK/HostedPayment/Redirect.py
A	ecommerce/Paysafe/src/PythonNetBanxSDK/HostedPayment/Redirect.py.python2
A	ecommerce/Paysafe/src/PythonNetBanxSDK/HostedPayment/Refund.py
A	ecommerce/Paysafe/src/PythonNetBanxSDK/HostedPayment/Refund.py.python2
A	ecommerce/Paysafe/src/PythonNetBanxSDK/HostedPayment/Settlement.py
A	ecommerce/Paysafe/src/PythonNetBanxSDK/HostedPayment/Settlement.py.python2
A	ecommerce/Paysafe/src/PythonNetBanxSDK/HostedPayment/ShoppingCart.py
A	ecommerce/Paysafe/src/PythonNetBanxSDK/HostedPayment/ShoppingCart.py.python2
A	ecommerce/Paysafe/src/PythonNetBanxSDK/HostedPayment/Transaction.py
A	ecommerce/Paysafe/src/PythonNetBanxSDK/HostedPayment/Transaction.py.python2
A	ecommerce/Paysafe/src/PythonNetBanxSDK/HostedPayment/__init__.py
A	ecommerce/Paysafe/src/PythonNetBanxSDK/OptPayRequest.py
A	ecommerce/Paysafe/src/PythonNetBanxSDK/OptPayRequest.py.python2
A	ecommerce/Paysafe/src/PythonNetBanxSDK/OptimalApiClient.py
A	ecommerce/Paysafe/src/PythonNetBanxSDK/OptimalApiClient.py.python2
A	ecommerce/Paysafe/src/PythonNetBanxSDK/RequestMethod.py
A	ecommerce/Paysafe/src/PythonNetBanxSDK/RequestMethod.py.python2
A	ecommerce/Paysafe/src/PythonNetBanxSDK/__init__.py
A	ecommerce/Paysafe/src/PythonNetBanxSDK/common/CardExpiry.py
A	ecommerce/Paysafe/src/PythonNetBanxSDK/common/CardExpiry.py.python2
A	ecommerce/Paysafe/src/PythonNetBanxSDK/common/DomainObject.py
A	ecommerce/Paysafe/src/PythonNetBanxSDK/common/DomainObject.py.python2
A	ecommerce/Paysafe/src/PythonNetBanxSDK/common/Error.py
A	ecommerce/Paysafe/src/PythonNetBanxSDK/common/Error.py.python2
A	ecommerce/Paysafe/src/PythonNetBanxSDK/common/FieldErrors.py
A	ecommerce/Paysafe/src/PythonNetBanxSDK/common/FieldErrors.py.python2
A	ecommerce/Paysafe/src/PythonNetBanxSDK/common/Link.py
A	ecommerce/Paysafe/src/PythonNetBanxSDK/common/Link.py.python2
A	ecommerce/Paysafe/src/PythonNetBanxSDK/common/__init__.py
A	ecommerce/Paysafe/src/bin/Environment.py
A	ecommerce/Paysafe/src/bin/__init__.py
A	ecommerce/Paysafe/src/sample_application/CardCustomer.py
A	ecommerce/Paysafe/src/sample_application/CardPayment.py
A	ecommerce/Paysafe/src/sample_application/Config.py
A	ecommerce/Paysafe/src/sample_application/CreateCard.py
A	ecommerce/Paysafe/src/sample_application/CreateProfile.py
A	ecommerce/Paysafe/src/sample_application/ExecuteScriptServer.py
A	ecommerce/Paysafe/src/sample_application/RandomTokenGenerator.py
A	ecommerce/Paysafe/src/sample_application/SilentHosted.py
A	ecommerce/Paysafe/src/sample_application/SimpleHosted.py
A	ecommerce/Paysafe/src/setup.py
A	ecommerce/Paysafe/src/test/RandomTokenGenerator.py
A	ecommerce/Paysafe/src/test/SampleTest_Card.py
A	ecommerce/Paysafe/src/test/SampleTest_Customer.py
A	ecommerce/Paysafe/src/test/SampleTest_Hosted.py
A	ecommerce/Paysafe/src/test/__init__.py
A	ecommerce/Paysafe/src/test/testCardPayments.py
A	ecommerce/Paysafe/src/test/testConnectionPool.py
A	ecommerce/Paysafe/src/test/testCustomerVault.py
A	ecommerce/Paysafe/src/test/testHosted.py
A	ecommerce/Paysafe/src/test/test_redirect.py

FICHIERS DE LANGUES
D	ecommerce/conf/locale/ar/LC_MESSAGES/django.po
	fichier retiré de notre côté
D	ecommerce/conf/locale/fa/LC_MESSAGES/djangojs.po
	fichier retiré de notre côté
D	ecommerce/conf/locale/fr/LC_MESSAGES/django.po
	fichier retiré de notre côté
D	ecommerce/conf/locale/fr/LC_MESSAGES/djangojs.po
	fichier retiré de notre côté
D	ecommerce/conf/locale/fr_CA/LC_MESSAGES/django.mo
	fichier retiré de notre côté
A	ecommerce/conf/locale/fr_CA/LC_MESSAGES/django.mo.old
	fichier à retirer afin de remettre les plus récents
R071	ecommerce/conf/locale/fr_CA/LC_MESSAGES/django.po	ecommerce/conf/locale/fr_CA/LC_MESSAGES/django.po.old
	fichier à retirer afin de remettre les plus récents
D	ecommerce/conf/locale/fr_CA/LC_MESSAGES/djangojs.mo
	fichier retiré de notre côté
A	ecommerce/conf/locale/fr_CA/LC_MESSAGES/djangojs.mo.old
	fichier à retirer afin de remettre les plus récents
R073	ecommerce/conf/locale/fr_CA/LC_MESSAGES/djangojs.po	ecommerce/conf/locale/fr_CA/LC_MESSAGES/djangojs.po.old
	fichier à retirer afin de remettre les plus récents
D	ecommerce/conf/locale/tr/LC_MESSAGES/djangojs.po
	fichier retiré de notre côté


EXTENSIONS
M	ecommerce/extensions/checkout/mixins.py
        QUELQUES DIFFÉRENCES

	            ##### code OpenedX #####
	            #####'payment_method': '{} | {}'.format(handled_processor_response.card_type, payment_processor.NAME)
	            ##### code OpenedX #####
	            ##### code EDUlib #####
	            'payment_method': '{}'.format(payment_processor.NAME)
	            ##### code EDUlib #####

        	total = str(basket.total_incl_tax)
        	reference = basket.order_number
        	monnaie = basket.currency

	        currency=monnaie,

            	reference=reference

            reference=reference
	        payment_event = PaymentEvent(event_type=event_type, amount=total, reference=reference, processor_name=self.payment_processor.NAME)


M	ecommerce/extensions/fulfillment/modules.py
	QUELQUES DIFFÉRENCES

	#### Added by EDUlib ####
	from decimal import *
	#### Added by EDUlib ####

	une ligne blanche (retiré)

	        self.send_email(order, course_key)

    	def send_email(self, order, course_key):
       	    """ Sends an email with enrollment code order information. """
            # Note (multi-courses): Change from a course_name to a list of course names.
            product = order.lines.first().product
            course = Course.objects.get(id=product.attr.course_key)

            course_no_taxes = Decimal(order.total_incl_tax) / Decimal(1.14975)
            tps_taxes = Decimal(order.total_incl_tax) / Decimal(1.14975) * Decimal(0.05)
            tvq_taxes = Decimal(order.total_incl_tax) / Decimal(1.14975) * Decimal(0.09975)

            course_no_taxes = "%.2f" % course_no_taxes
            tps_taxes = "%.2f" % tps_taxes
            tvq_taxes = "%.2f" % tvq_taxes
	
            send_notification(
           	order.user,
            	'COURSE_PURCHASED',
            	context={
		    'contact_url': order.site.siteconfiguration.build_lms_url('/contact'),
                    'course_title': course_key,
                    'course_price': "%.2f" % Decimal(order.total_incl_tax),
               	    'order_number': order.number,
               	    'order_currency': order.currency,
               	    'partner_name': order.site.siteconfiguration.partner.name,
               	    'lms_url': order.site.siteconfiguration.build_lms_url(),
               	    'receipt_page_url': order.site.siteconfiguration.build_lms_url('{}?orderNum={}'.format(settings.RECEIPT_PAGE_PATH, order.number)),
               	    'course_no_taxes': course_no_taxes,
               	    'tps': tps_taxes,
               	    'tvq': tvq_taxes,
            	},
           	site=order.site
	    )


	        course_no_taxes = Decimal(order.total_incl_tax) / Decimal(1.14975)
	        tps_taxes = Decimal(order.total_incl_tax) / Decimal(1.14975) * Decimal(0.05)
	        tvq_taxes = Decimal(order.total_incl_tax) / Decimal(1.14975) * Decimal(0.09975)

 	        course_no_taxes = "%.2f" % course_no_taxes
	        tps_taxes = "%.2f" % tps_taxes
	        tvq_taxes = "%.2f" % tvq_taxes

        	#send_notification(
        	#    order.user,
        	#    'ORDER_WITH_CSV',
        	#    context={
        	#        'contact_url': order.site.siteconfiguration.build_lms_url('/contact'),
        	#        'course_name': course.name,
        	#        'download_csv_link': order.site.siteconfiguration.build_ecommerce_url(
        	#            reverse('coupons:enrollment_code_csv', args=[order.number])
        	#        ),
        	#        'enrollment_code_title': product.title,
        	#        'lms_url': order.site.siteconfiguration.build_lms_url(),
        	#        'order_number': order.number,
        	#        'partner_name': order.site.siteconfiguration.partner.name,
        	#        'receipt_page_url': receipt_page_url,
        	#    },
        	#    site=order.site
        	#)

            	'COURSE_PURCHASED',

                'course_title': course_key,
                'course_price': "%.2f" % Decimal(order.total_incl_tax),

                'order_currency': order.currency,
M	ecommerce/extensions/order/utils.py
	##### class OrderNumberGenerator(object):
    	# Modified by EDUlib
    	#OFFSET = 100000 # production environment
    	#OFFSET = 300000 # test environment
    	#OFFSET = 500000
    	#OFFSET = 600000
    	#OFFSET = 700000
    	OFFSET = 400000
    	# Modified by EDUlib
M	ecommerce/extensions/payment/exceptions.py ***** can I remove the two pass? *****
	    pass
	
	# Added by EDUlib
	class InvalidPaysafeDecision(GatewayError):
    	"""The decision returned by Paysafe was not recognized."""
    	pass
	# Added by EDUlib
M	ecommerce/extensions/payment/migrations/0006_enable_payment_processors.py
	from ecommerce.extensions.payment.processors.paysafe import Paysafe
	    for processor in (Cybersource, Paypal, Paysafe):
	    for processor in (Cybersource, Paypal, Paysafe):
A	ecommerce/extensions/payment/processors/paysafe.py
	code ajouté pour notre processeur de paiement Paysafe
	basé en partie sur le vieux code de Cybersource
	il faudrait revoir le code un jour
M	ecommerce/extensions/payment/urls.py
	from ecommerce.extensions.payment.views import PaymentFailedView, SDNFailure, cybersource, paypal, stripe, paysafe
	    url(r'^paysafe/notify/page.html$', paysafe.PaysafeNotifyView.as_view(), name='paysafe_notify'),
A	ecommerce/extensions/payment/views/paysafe.py
	code ajouté pour notre processeur de paiement Paysafe
	basé en partie sur le vieux code de Cybersource
	il faudrait revoir le code un jour
M	ecommerce/extensions/refund/models.py
	            #####refund_reference_number = processor.issue_credit(self.order.number, self.order.basket, source.reference, amount, self.currency)
	            refund_reference_number = processor.issue_credit(self.order, source.reference, amount, self.currency)


NOTIFICATIONS
M	ecommerce/notifications/notifications.py
	        ####'platform_name': site.name,
        	'platform_name': 'EDUlib',


SETTINGS
Les valeurs des différentes variables dans les fichiers de config ne sont pas dans le fork bien entendu :)
A	ecommerce/settings/_oscar.py.master
	copie du fichier original
A	ecommerce/settings/base.py.master
	copie du fichier original
M	ecommerce/settings/local.py
	modifications locales pour EDUlib
	#####CORS_ORIGIN_WHITELIST = (
	#####    'http://localhost:1991'
	#####)
A	ecommerce/settings/local.py.master
	copie du fichier original
A	ecommerce/settings/production.py.master
	copie du fichier original


TEMPLATES
M	ecommerce/templates/edx/checkout/receipt.html
	pas de code pour enterprise dans nos reçus
	{% load enterprise %}
	pas de code pour enterprise_customer dans nos reçus
                  {% enterprise_customer_for_voucher discount.voucher as enterprise_customer %}
                  {% if enterprise_customer %}
                      <div class="enterprise-customer">
                        {% filter force_escape %}
                          {% blocktrans trimmed with enterprise_name=enterprise_customer.name %}
                              Courtesy of {{ enterprise_name }}.
                          {% endblocktrans %}
                        {% endfilter %}
                      </div>
                  {%  endif %}
A	ecommerce/templates/edx/checkout/receipt.html.ironwood
	reçu html pour ironwood
	il y a peut-être des ajustements à faire dans celui sans .ironwood
A	ecommerce/templates/enterprise/enterprise_coupon_app.html
	fichier déplacé car pas au bon endroit pour fonctionner chez nous
A	ecommerce/templates/enterprise/enterpriseoffer_form.html
	fichier déplacé car pas au bon endroit pour fonctionner chez nous
A	ecommerce/templates/enterprise/enterpriseoffer_list.html
	fichier déplacé car pas au bon endroit pour fonctionner chez nous
A	ecommerce/templates/journals/journalbundleoffer_form.html
	fichier déplacé car pas au bon endroit pour fonctionner chez nous
A	ecommerce/templates/journals/journalbundleoffer_list.html
	fichier déplacé car pas au bon endroit pour fonctionner chez nous
M	ecommerce/templates/oscar/customer/email_base.html
	changement de l'adresse physique
M	ecommerce/templates/oscar/customer/emails/commtype_course_purchased_body.html
	changement à notre gabarit de reçu envoyé par courriel
M	ecommerce/templates/oscar/customer/emails/commtype_course_purchased_body.txt
	changement à notre gabarit de reçu envoyé par courriel
